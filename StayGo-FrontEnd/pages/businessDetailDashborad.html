<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Details Dashboard - StayGo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="/css/businessDetail.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <nav class="navbar-custom">
        <a href="/pages/dashboard.html" class="logo">StayGo</a>
        
        <div class="nav-links">
            <a href="/pages/dashboard.html">Dashboard</a>
            <a href="/pages/businessDetailDashborad.html">Businesses</a>
            <a href="/pages/clientBookingHistory.html">Bookings</a>
            <a href="/pages/reports.html">Reports</a>
        </div>

        <div class="profile" id="profileDropdown">
            <img id="user-profile-pic" src="/assets/image/profile-icon-design-free-vector.jpg" alt="Profile">
            <div class="dropdown-menu">
                <a href="/pages/myAccount.html"><i class="bi bi-person-circle"></i> My Account</a>
                <hr class="dropdown-divider">
                <a href="/pages/login.html" id="logoutBtn" class="text-danger"><i class="bi bi-box-arrow-right"></i> Log out</a>
            </div>
        </div>
    </nav>

    <div class="container mt-5 text-end">
        <button id="Business-add-button" class="btn rounded-5 mb-3 " data-bs-toggle="modal" style="width: 280px;" data-bs-target="#Business-add-modal">Add Business Details</button>
    </div>

    <div class="container" id="business-orders" style="height: 800px; overflow-y: auto;"></div>

    <div class="container mt-3">
        <h3>All Business Details</h3>
        <div id="business-list" class="row"></div>
    </div>

    <!-- Add Business Modal -->
    <div class="modal fade" id="Business-add-modal" tabindex="-1" aria-labelledby="BusinessAddLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="BusinessAddLabel">Add Business Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="add-business-form">
                    <div class="modal-body">
                        <select id="luxuryLevel" class="form-select mb-3 border-dark" required>
                            <option value="" disabled selected>Select Luxury Level</option>
                            <option value="STANDARD">Standard</option>
                            <option value="DELUXE">Deluxe</option>
                            <option value="SUPER_DELUXE">Super Deluxe</option>
                            <option value="LUXURY">Luxury</option>
                            <option value="FIVE_STAR">5-Star</option>
                        </select>
                        <input type="number" min="1" class="form-control mb-3 border-dark" id="roomsCount" placeholder="Number of Rooms" required>
                        <input type="number" min="1" class="form-control mb-3 border-dark" id="bedsCount" placeholder="Number of Beds (per room)" required>
                        <input type="number" min="1" class="form-control mb-3 border-dark" id="guestCount" placeholder="Number of Guest Count (per room)" required>
                        <input type="number" min="0" step="0.01" class="form-control mb-3 border-dark" id="pricePerDay" placeholder="Price Per Day One Room (LKR)" required>
                        <input type="number" min="0" step="0.01" class="form-control mb-3 border-dark" id="pricePerNight" placeholder="Price Per Night One Room (LKR)" required>


                        
                        <textarea id="roomDesc" class="form-control border-dark mb-3" rows="2" placeholder="Facilities / Description"></textarea>
                        <input type="file" class="form-control mb-3" id="roomImages" accept="image/*">
                        <!-- Image preview -->
                        <img id="preview" src="" style="display:none; max-width:200px; margin-top:10px;">
                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-warning" id="resetBtn">Reset</button>
                        <button type="submit" class="btn btn-success">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Business Modal -->
    <div class="modal fade" id="Business-edit-modal" tabindex="-1" aria-labelledby="BusinessEditLabel" aria-hidden="true">
        <div class="modal-dialog w-75">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="BusinessEditLabel">Edit Business Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="edit-business-form">
                    <div class="modal-body">
                        <input type="hidden" id="editBusinessDetailId">

                        <select id="editLuxuryLevel" class="form-select mb-3 border-dark" required>
                                <option value="STANDARD">Standard</option>
                                <option value="DELUXE">Deluxe</option>
                                <option value="SUPER_DELUXE">Super Deluxe</option>
                                <option value="LUXURY">Luxury</option>
                            <option value="FIVE_STAR">5-Star</option>
                        </select>

                        <input type="number" min="1" class="form-control mb-3 border-dark" id="editRoomsCount" placeholder="Number of Rooms" required>
                        <input type="number" min="1" class="form-control mb-3 border-dark" id="editBedsCount" placeholder="Number of Beds (per room)" required>
                        <input type="number" min="1" class="form-control mb-3 border-dark" id="editGuestCount" placeholder="Number of Guest Count (per room)" required>
                        <input type="number" min="0" step="0.01" class="form-control mb-3 border-dark" id="editPricePerDay" placeholder="Price Per Day One Room (LKR)" required>
                        <input type="number" min="0" step="0.01" class="form-control mb-3 border-dark" id="editPricePerNight" placeholder="Price Per Night One Room (LKR)" required>

                        <textarea id="editRoomDesc" class="form-control border-dark mb-3" rows="2" placeholder="Facilities / Description"></textarea>
                        
                        <label>Status</label>
                        <select id="editStatus" class="form-select mb-3 border-dark" required>
                            <option value="ACTIVE">Active</option>
                            <option value="INACTIVE">Deactive</option>
                        </select>

                        <input type="file" class="form-control mb-3" id="editRoomImage" accept="image/*">
                        <img id="editPreview" src="" style="display:none; max-width:200px; margin-top:10px;">
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Submit</button>
                        <button type="reset" class="btn btn-warning" id="resetBtn">Reset</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/businessDetailDashboard.js"></script>
    <script src="/js/myAccount.js"></script>

    <script>
        const profile = document.getElementById('profileDropdown');
        profile.addEventListener('click', () => {
            profile.classList.toggle('show');
        });

        // Optional: close dropdown if clicked outside
        document.addEventListener('click', (e) => {
            if (!profile.contains(e.target)) {
                profile.classList.remove('show');
            }
        });
    </script>
</body>
</html>
